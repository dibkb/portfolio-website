<Cover
  src="https://images.unsplash.com/photo-1607706189992-eae578626c86?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
  alt="Image from https://images.unsplash.com/photo-1607706189992-eae578626c86?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
  caption="Image credits unsplash.com"
/>

# ğŸ¬ Building an Agentic AI Movie Recommendation System

**Using Graph Databases, Semantic Search, and Community Signals**

Finding a movie that matches your mood or taste shouldn't feel like solving a puzzle. That's why we built an **agentic AI movie recommendation system** â€” a smart assistant that understands natural language queries and surfaces meaningful recommendations using a combination of **graph reasoning**, **semantic similarity**, and **community discussions**.

Let's break down how it works ğŸ‘‡

---

## ğŸ§  Natural Language Understanding with LLMs

When a user enters a search query, we use an **LLM (LLaMA 3.3)** to process the text. The model performs **Named Entity Recognition (NER)** to extract important information like:

- ğŸ¬ **Movie titles**
- ğŸ‘¨â€ğŸ¤ **Actors / Directors**
- ğŸ“… **Years**
- ğŸ­ **Genres**
- ğŸŒ **Search modifiers** (e.g., "Search Reddit", "Letterboxd")

---

## ğŸ•¸ï¸ Querying the Graph Database (Neo4j)

If the query includes structured entities like _genres_, _directors_, or _release years_, we map the extracted elements into a **prebuilt Cypher query** to search our **Neo4j movie graph**.

### ğŸ“Š What's in the Graph?

- **49,369 nodes** including movies, people, genres, and years
- **132,772 relationships**, like:
  - `ACTED_IN`
  - `DIRECTED_BY`
  - `HAS_GENRE`
  - `RELEASED_IN`

> Example:  
> _"Show me action movies directed by Christopher Nolan"_  
> â†’ Cypher query pulls all action genre movies with the `DIRECTED_BY` relation pointing to Nolan.

---

## ğŸ§¬ Semantic Search for Similar Movies

If the user asks for **movies similar to another movie**, e.g.  
_"Show me movies like *The Departed*"_ â€”  
we switch to **semantic search**.

### How It Works:

1. Extract the movie title (`The Departed`) using NER.
2. Fetch its **summary embedding** from **Quadrant DB** (vector database).
3. Perform **cosine similarity** search against other embedded movie summaries.
4. Return the top N most similar results.

> Embeddings are generated using `jina-embeddings-v3` and stored in **Quadrant**.

---

## ğŸ§‘â€ğŸ¤â€ğŸ§‘ Community-Driven Discovery (Reddit + Letterboxd)

Our agent can also leverage online movie communities:

### ğŸ” Reddit Integration

If the query contains **"Search Reddit"**, the agent:

1. Uses **Brave Search** to find top `reddit.com` links.
2. Scrapes comment threads from those posts.
3. Uses the LLM to **extract movie mentions** from user comments.

### ğŸ“½ï¸ Letterboxd Integration

For **"Search Letterboxd"**, the agent:

1. Finds top lists or reviews via Brave.
2. **Directly extracts movie names** from curated Letterboxd lists (no scraping comments).

---

### **Query-to-Movie Semantic Search**

We also support **full-query semantic matching** â€” ideal when the user **describes the kind of movie** they want without naming one.

> _Movies where the protagonist invents a time machine and travels back in time to his childhood to fix his mistakes_

How it works:

1. Embed the **entire query** using `jina-embeddings-v3`.
2. Search the **Quadrant vector database** using cosine similarity.
3. Fetch top-N most semantically similar movie summaries.

---

## ğŸ§° Databases Used

### 1. **Neo4j Graph Database**

- Stores structured relationships between movies, people, genres, and time.
- Powers reasoning-style queries based on graph paths.

### 2. **Quadrant Vector Database**

- Stores dense embeddings of movie summaries.
- Enables similarity search using cosine distance.

---

## ğŸš€ Bringing It All Together

This hybrid system empowers users to explore the movie world using just natural language. Whether you're searching by genre, similarity, director, or online opinions â€” the AI understands your intent and routes the query through the best tool for the job.

This is **agentic AI** in action â€” combining structured reasoning, semantic intelligence, and real-time web knowledge to help you find your next favorite film ğŸ¥ğŸ¿

---

## ğŸ§± Tech Stack Overview

Hereâ€™s a breakdown of the technologies that power this agentic movie recommendation system:

### ğŸ§  Backend

- **FastAPI (Python)** â€“ High-performance API framework used to orchestrate the logic.
- **LangChain** â€“ Handles the flow of LLM chains including entity extraction, semantic routing, and custom tools.
- **LLaMA 3.3** â€“ The core large language model used for NER, comment understanding, query interpretation.
- **Jina Embeddings v3** â€“ Used to convert movie summaries and natural language queries into high-dimensional embeddings.
- **Quadrant** â€“ A scalable vector database used for all similarity and semantic search operations.
- **Neo4j Aura** â€“ Fully managed graph database storing all structured relationships between movies, genres, directors, etc.
- **Brave Search** â€“ Private search engine used to fetch relevant Reddit and Letterboxd results in real time.

### ğŸ”„ Real-time Query Flow

- **Server-Sent Events (SSE)** â€“ The backend streams intermediate events back to the frontend in real-time.  
  Example:
  - `Entity extracted: {"genre": "thriller", "director": "Nolan"}`
  - `Cypher query executed...`
  - `Vector search complete...`

---

### ğŸ¨ Frontend

- **Vite** â€“ Ultra-fast frontend bundler powering the UI.
- **State Management**:
  - `nuqs` â€“ For syncing state to the URL (perfect for sharable search sessions).
  - `zustand` â€“ Lightweight state management for application logic.
- **Styling**:
  - `shadcn/ui` â€“ Headless UI components built on Radix UI.
  - `Tailwind CSS` â€“ Utility-first styling framework for fast UI prototyping.

---

## ğŸ”— Project Links

- [GitHub Repository Client](https://github.com/dibkb/cinema-lens-client)
- [GitHub Repository Server](https://github.com/dibkb/cinema-lens-server)
- [Live Link](https://cinema.borborah.xyz/)
- [Video Demo](https://dibkb-tesseract-images.s3.ap-south-1.amazonaws.com/website/demo-videos/cinema-lens.mp4)
